<HTML>
<BODY>
<canvas width="1000" height="1000" id="lab3">
</canvas>

<script>

    let canvas = document.getElementById("lab3");
    let ctx = canvas.getContext('2d');
    // ctx.fillStyle = "#989f98";
    ctx.fillRect(0,0,canvas.width, canvas.height);
    let x0;
    let y0 ;
    let x1;
    let y1;
    let pointIndex = 0;

    canvas.addEventListener('click', function (e) {
        if (pointIndex == 0) {
            x0 = e.offsetX;
            y0 = e.offsetY;
            pointIndex = 1;
        }
        else {
            x1 = e.offsetX;
            y1 = e.offsetY;
          /*  ctx.fillStyle = "#00FF00";
            ctx.fillRect(x0,y0,5,5);
            ctx.fillStyle = "#ff0000";
            ctx.fillRect(x1,y1,5,5);*/
            line(ctx, x0, y0, x1, y1);
            pointIndex = 0;
        }
    });

    function line(ctx, x0, y0, x1, y1) {
        const dX = (x1 - x0 >= 0 ? 1 : -1);
        const dY = (y1 - y0 >= 0 ? 1 : -1);

        const absDeltaX = Math.abs(x1 - x0);
        const absDeltaY = Math.abs(y1 - y0);

        let length = Math.max(absDeltaX, absDeltaY) + 1;

        let error = 0;
        if (length === 0) {
            ctx.fillRect(x0, y0, 1, 1);
        }
        let x = x0;
        let y = y0;
        if (absDeltaY <= absDeltaX) {
            let cnt = 0;
            while(length-- > 0) {
                error += 2 /** dY*/ * absDeltaY;
                if (cnt === 0) {
                    ctx.fillStyle = "#1c0496";
                    ctx.fillRect(x, y, 3, 3);
                    cnt++
                    ctx.fillStyle = "#c8b400";
                    continue;
                }
                if (error >= absDeltaX) {
                    y += dY
                    error -= 2 * absDeltaX;
                }
                x += dX;
                ctx.fillRect(x, y, 1, 1);
            }

        } else {
            let cnt = 0;
            while(length--) {
                error += 2 * absDeltaX;
                if (cnt === 0) {
                    ctx.fillStyle = "#ff0098";
                    ctx.fillRect(x, y, 3, 3);
                    cnt++
                    ctx.fillStyle = "#c953e5";
                    continue;
                }
                if (error >= absDeltaY) {
                    x += dX
                    error -= 2 * absDeltaY;
                }
                y += dY;
                ctx.fillRect(x, y, 1, 1);
            }
        }
    }

</script>
</BODY>
</HTML>