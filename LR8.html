/*
  1. Создать массив точек граинц фигуры (в массив не включаются точки нижних концов рёбер и все точки горизонтальных рёбер.
  2. Отсортировать точки по координате "y"
  3. Для каждого "y" отсортировать по строке.  
  4. При проходе по координате "y", необходимо рисовать отрезки от каждой нечётной точки для данной координаты (от каждого чётного индекса ) до каждой чётной (нечётного индекса). 
*/



<HTML>

<BODY>

    <canvas width="1000" height="1000" id="can1">
    </canvas>

    <script>


        var canvas = document.getElementById("can1");
        var ctx = canvas.getContext('2d');

        ctx.clearRect(0, 0, 1000, 1000);

        let img = new Image;
        img.src = "Eleph.png"; // Change your file NAME if you want 


/*
        let point_index = 0;
        let points = [];
        const 

            ctx.putImageData(imgData, 0, 0);

*/
      

       function fillTriangle(ctx, points) {
         let maxY = points[1], minY = points[1]; 
         for(let i = 0; i < N; i++) {
          if(points[i*2+1] > maxY) maxY = points[i*2+1];
          if(points[i*2+1] < minY) minY = points[i*2+1];
           
         }
         
         let yArray = [];
         for(let i = 0; i < N; i++) {
          let high = 0, low = 0;
          let k = 0;
          if(i != N-1) k = i+1; 
          if(points[i*2+1] > points[k*2+1]) { high_idx = i; low_idx = k; }
          else if(points[i*2+1] < point[k*2+1]) {
            low_idx = i; high_idx = k; 
          }
          else continue;
           
          let tgk = (points[high_idx*2+1] - points[low_idx*2+1])/(points[high_idx*2]-points[low_idx*2]);
           
          for(let j = points[low_idx*2+1]; j < points[high_idx*2+1]; j++) {
           if (typeof yArray[j].i == "undefined") 
             yArray[j] = [];
           yArray[j].push((j-points[low_idx*2+1])/tgk + points[low_idx*2]);
          }
         }
         
         for(let i = minY; i < maxY; i++) {
          let xArray = yArray[i].sort(function(a,b) {return a-b;});
           console.log(i,"x", xArray, "y", yArray[i]);
           xArray.sort();
          for(let j = 0; j < xArray.length; j ++) {
           for(let k = xArray[j*2]; k < xArray[j*2+1]; k++) {
            ctx.fillRect(k, i, 1, 1); 
           }
          }
         }
       }
    </script>
</BODY>
</HTML>
